

## 📄 要件定義書（Requirements Definition）

### 1. プロジェクト概要

家庭内で合意した「ゲーム時間」をトータルで管理する。親が合意時間を付与し、子供は消費を自己申告で記録する。MVPではタスク管理は行わず、残り時間の表示と付与・消費の操作に特化する。

---

### 2. ステークホルダー

| 種別 | 役割                         |
| -- | -------------------------- |
| 子供 | 残り時間を確認し、自己申告で時間を消費するユーザー |
| 親  | 合意時間を付与し、全体の残り時間を管理するユーザー |

---

### 3. 対応デバイス

* 初期対応：Web / PWA（iPad・iPhone・Android・PC）
* 将来的対応：ネイティブアプリ、Alexa などによる音声操作連携（拡張設計）

---

### 4. 主要機能一覧

#### 子供向け機能

* 残りゲーム時間の大きな表示
* 消費の自己申告（開始/終了トグル、またはプリセット消費）
* 消費セッションの開始/終了時刻を記録（履歴）
* 追加時間の申請（+5/+10/+15/+30/+60 分、任意入力）

#### 親向け機能

* 合意時間の付与（プリセット +5/+10/+15 分）
* 追加申請の承認/却下（設定で自動承認可）
* 残り時間の編集・リセット
* 親モード切替の PIN ロック

---

### 5. 非機能要件

| 項目     | 内容                                      |
| ------ | --------------------------------------- |
| 利用者認証  | なし（MVP）。親画面のみ PIN ロック。将来: Firebase Auth |
| データ永続化 | 端末ローカル（IndexedDB / LocalStorage）。将来: Firestore |
| UI設計   | タッチ操作前提の直感的 UI（子は1ボタン操作）                 |
| セキュリティ | サーバレス前提で最小限。重要操作は確認/長押しで誤操作防止        |

---

### 6. 時間運用例（初期設定）

| 操作              | 既定値                 |
| ----------------- | ---------------------- |
| 付与プリセット       | +5 / +10 / +15 分       |
| 消費方法           | 開始/終了トグル または -5/-10/-15 分 |
| 連続使用の最大長    | 120 分                  |
| 丸め              | 1 分単位                 |
| 残り時間が負になる場合 | 0 分で打ち止め            |
| 追加時間の申請       | 子が申請→親が承認（自動承認設定も可） |

---

### 7. MVP スコープ（最小工数）

- 子供向け
  - 残り時間の大きな表示
  - 「開始/終了」トグル1ボタン（終了は長押し or 確認）
  - 残り時間が 0 の場合は開始不可の明示
  - 追加時間の申請（プリセット/任意）
- 親向け
  - 時間付与（+5/+10/+15 分のプリセット）
  - 申請一覧の承認/却下（自動承認オプション）
  - リセット（確認付き）
  - 親モード切替に PIN ロック（4 桁）
- 保存/同期
  - 端末ローカル保存（IndexedDB / LocalStorage）
  - JSON エクスポート/インポート（バックアップ/移行）
- 省略
  - ログイン、クラウド同期、通知、詳細なタスク管理（将来対応）

### 8. 受け入れ基準（MVP）

- 子画面で 1 タップ開始 → 再度操作で終了し、残り時間が正しく減る
- アプリ終了/再起動後も開始状態を復元し、終了時に経過時間が精算される
- 残り時間が 0 のときは開始できない（理由を表示）
- 消費セッションの開始/終了時刻が履歴として保存される
- 子が追加時間を申請でき、親は承認/却下できる（自動承認設定時は即時反映）
- 親画面でプリセット付与/リセットができる（PIN ロックで保護）
- データを JSON でエクスポート/インポートできる

---
